window.console||(window.console={}),console.log||(console.log=function(){});var __extends=function(e,t){function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},__assign=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},__rest=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(o[n[r]]=e[n[r]]);return o},__decorate=function(e,t,o,n){var r,c=arguments.length,l=c<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,o,n);else for(var f=e.length-1;f>=0;f--)(r=e[f])&&(l=(c<3?r(l):c>3?r(t,o,l):r(t,o))||l);return c>3&&l&&Object.defineProperty(t,o,l),l};
var feather;!function(e){!function(e){function t(e){return e&&"[object Function]"===n.call(e)}var n={}.toString;e.compose=function(e){return function(t){return 1===e.length?e[0](t):e.reduce(function(e,t){return t(e)},t)}},e.isFunction=t,e.isDef=function(e){return void 0!==e},e.isUndef=function(t){return!e.isDef(t)},e.strFactory=function(e){return t(e)?e():e}}(e.functions||(e.functions={}))}(feather||(feather={}));var feather;!function(e){!function(e){function t(e,t){var n=t[e];t[e]=function(){o.set(t,!0);var e=n.apply(t,arguments);return o.set(t,!1),a(t,"splice",i),e}}function n(t,n){var r=n[t];"splice"===t?n.splice=function(e,o){var i=[].slice.call(arguments,2),s=r.apply(n,arguments);return a(n,t,[e,o,i,s]),s}:"sort"===t&&(n.sort=function(o){var i=e.range(0,n.length-1),s=o?[n.map(function(e,t){return t}).sort(function(e,t){return o(n[e],n[t])}).map(function(e){return i[e]})]:i,c=r.call(n,o);return a(n,t,s),c})}var r=new WeakMap,o=new WeakMap,i=[0,0,[],[]];e.from=function(e){return[].slice.call(e)},e.removeFromArray=function(e,t){for(var n=0,r=t.length,o=e.length;o--;)if(~t.indexOf(e[o]))n++;else if(n){if(e.splice(o+1,n),0==(r-=n)){n=0;break}n=0}n&&e.splice(0,n)};var a=function(e,t,n){if(!0!==o.get(e))for(var i=0,a=r.get(e);i<a.length;i++)a[i][t].apply(e,n)};e.notifyListeners=function(e){return a(e,"splice",i)},e.range=function(e,t){for(var n=t-e+1,r=new Array(n),o=0,i=r.length;o<i;o++)r[o]=o+e;return r},e.observeArray=function(e,o){var i=r.get(e);i?i.push(o):(r.set(e,[o]),e.pop=function(){return e.splice(e.length-1,1)[0]},e.push=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.splice.apply(e,[e.length,0].concat(t)),e.length},e.fill=function(){throw Error("observed arrays cannot be filled. items must be unique, use Array.splice instead!")},e.reverse=function(){var t=e.slice();return e.sort(function(e,n){return t.indexOf(n)-t.indexOf(e)}),e},e.shift=function(){return e.splice(0,1)[0]},e.unshift=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.splice.apply(e,[0,0].concat(t)),e.length},n("splice",e),n("sort",e),t("forEach",e))}}(e.arrays||(e.arrays={}))}(feather||(feather={}));var feather;!function(e){!function(t){function n(e,t){if(""===t)return e;var n,r,o;for(n=0,r=(o=t.split(".")).length;n<r;n++)if(e=e[o[n]],a(e))return;return e}function r(e,t){if(a(t))return[];var n=Object.getPrototypeOf(t),o=e.get(n)||[];return n&&o.push.apply(o,r(e,n)),o}function o(e,n){if(a(n))return{};var r=Object.getPrototypeOf(n),i=__assign({},e.get(r)||{});return r&&t.merge(i,o(e,r)),i}var i=e.arrays.observeArray,a=e.functions.isUndef;t.isObject=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)},t.values=function(e){return"values"in Object?Object.values(e):Array.apply(null,Object.keys(e).map(function(t){return e[t]}))},t.deepValue=n,t.setDeepValue=function(e,t,n){var r,o,i;for(r=0,o=(i=t.split(".")).length-1;r<o;r++)e=e[i[r]]||(e[i[r]]={});return e[i.pop()]=n},t.collectAnnotationsFromArray=r,t.merge=function(e,n){return void 0===e&&(e={}),Object.keys(n).forEach(function(r){var o=e[r],i=n[r];Array.isArray(o)?o.push.apply(o,i):t.isObject(o)?t.merge(o,i):e[r]=i}),e},t.collectAnnotationsFromTypeMap=o,t.pathCallbacks=new WeakMap;var s=function(e,t,n,r){var o=n.split(".").pop(),i=e[o];Object.defineProperty(e,o,{get:function(){return i},set:function(e){return i=e,u(i,t,n,r),r(n),i}}),u(i,t,n,r)},c=function(e,t){var n=e.indexOf(".["),r=~n?e.substring(0,n):e;return t.filter(function(e){return r.startsWith(e)||e.startsWith(r)})};t.createObjectPropertyListener=function(e,r,o){var i=t.pathCallbacks.get(e),a=r.split(".").shift(),u=t.ensure(t.pathCallbacks,e,(f={},f[r]=[o],f));i||setTimeout(function(){return s(e,e,a,function(t){c(t,Object.keys(u)).forEach(function(t){u[t].forEach(function(r){r(n(e,t))})})})},0);var f};var u=function(e,n,r,o){if(t.isObject(e)){var a=Object.keys(t.pathCallbacks.get(n));Object.keys(e).forEach(function(t){var i=r+"."+t;c(i,a).length>0&&s(e,n,i,o)})}else Array.isArray(e)&&(e.forEach(function(e,t){return u(e,n,r+".["+t+"]",o)}),i(e,{sort:function(){return o(r)},splice:function(e,t,i){o(r),i.forEach(function(e,t){return u(e,n,r+".["+t+"]",o)})}}))};t.ensure=function(e,n,r){var o=e.get(n);return o?Array.isArray(o)&&Array.isArray(r)?o.push.apply(o,r):t.isObject(o)&&t.merge(o,r):e.set(n,o=r),o}}(e.objects||(e.objects={}))}(feather||(feather={}));var feather;!function(e){!function(e){var t=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","matchesSelector"].reduce(function(e,t){return Element.prototype[t]||e});e.selectorMatches=function(e,n){return t.call(e,n)},e.allChildNodes=function(e){var t,n=document.createTreeWalker(e,NodeFilter.SHOW_ALL,null,!1),r=[];do{((t=n.currentNode).nodeType!==Node.TEXT_NODE||t.textContent.trim())&&r.push(t)}while(n.nextNode());return r},e.allTextNodes=function(e){for(var t,n=[],r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);t=r.nextNode();)n.push(t);return n}}(e.dom||(e.dom={}))}(feather||(feather={}));var feather;!function(e){!function(t){var n=e.objects.deepValue;t.format=function(e,t){return e.replace(/{{.*?}}/g,function(e){return n(t,e.substring(2,e.length-2))})},t.namedRegexMatch=function(e,t,n){var r=t.exec(e);if(r)return r.reduce(function(e,t,r){return r>0&&(e[n[r-1]]=t),e},{})}}(e.strings||(e.strings={}))}(feather||(feather={}));var feather;!function(feather){var boot;!function(boot){var isDef=feather.functions.isDef,from=feather.arrays.from,ComponentInfo=function(){return function(e,t,n,r){this.selector=e,this.singleton=t,this.attributes=n,this.component=r}}();boot.ComponentInfo=ComponentInfo;var attributeParser=function(node,context){return function(key){var value=node.getAttribute(key),m=(value||"").match(/^{(.+?)}\/?$/i);if(m){var js=m[1];value=context[js]||function(str){return eval(str)}.bind(context)(js),isDef(value)&&node.removeAttribute(key)}return value}},WidgetFactory=function(){function e(){}return e.start=function(t,n){void 0===t&&(t=document),feather.annotations.TemplateFactory.warmUp();for(var r=e.widgetRegistry,o=0,i=r.length;o<i;o++){var a=r[o],s=from(t.querySelectorAll(a.selector));e.initComponents(s,r[o],n)}t===document&&feather.routing.runRoutes()},e.initComponents=function(t,n,r){for(var o=0,i=t.length;o<i;o++){var a=t[o],s=n.attributes.map(attributeParser(a,r||window)),c=new(Function.prototype.bind.apply(n.component,[null].concat(s)));n.singleton&&e.singletonRegistry.push(c),r&&(c.parentWidget=r,r.childWidgets.push(c)),c.bindToElement(a)}},e.register=function(e,t){this.widgetRegistry.push(new ComponentInfo(e.selector,e.singleton,e.attributes||[],t))},e.widgetRegistry=[],e.singletonRegistry=[],e}();boot.WidgetFactory=WidgetFactory}(boot=feather.boot||(feather.boot={}))}(feather||(feather={})),function(e){e.start=function(){return e.boot.WidgetFactory.start()}}(feather||(feather={}));var feather;!function(e){!function(t){var n=e.objects.collectAnnotationsFromArray,r=e.objects.ensure,o=new WeakMap,i=new WeakMap,a=function(){function e(){}return e.prototype.attachMediaListeners=function(){var e=this;n(o,this).forEach(function(t){var n=window.matchMedia(t.query),o=function(n){n.matches&&e[t.method].call(e,n)};n.addListener(o),r(i,e,[{mediaQuery:n,listener:o}]),o(n)})},e.prototype.cleanUp=function(){var e=i.get(this);if(e)for(var t=0,n=e;t<n.length;t++){var r=n[t];r.mediaQuery.removeListener(r.listener)}},e}();t.MediaQueryAware=a,t.Media=function(e){return function(t,n){r(o,t,[]).push({method:n,query:e})}}}(e.media||(e.media={}))}(feather||(feather={}));var feather;!function(e){!function(t){function n(n){for(var o,a=n.replace(t.selfClosingTags,t.openTags),s=y(t.getFragment(a)),u=i(s),f={};o=l.exec(n);)f[o[1].toLowerCase()]=o[1];for(var h=e.boot.WidgetFactory.widgetRegistry,p=[],v=0,d=h.length,m=u.length;v<d;v++){for(var b=[],w=h[v],E=0;E<m;E++){var T=u[E];T.nodeType===Node.ELEMENT_NODE&&c(T,h[v].selector)&&b.push(E)}b.length>0&&p.push({info:w,nodes:b})}return new g(s,r(u),f,p)}function r(e){var t,n=[];return e.forEach(function(e,r){if(e.nodeType===Node.TEXT_NODE){var i=e.textContent,a=f.exec(i);null!==a&&n.push(new d(r,3,a[1]))}else if(e.nodeType===Node.ELEMENT_NODE)for(var s=0,c=o(e.attributes);s<c.length;s++){var u=c[s],l=u.nodeName;if(t=l.match(f))e.removeAttribute(t[0]),n.push(new d(r,1,t[1]));else if("class"===l)for(var h=0,p=o(e.classList);h<p.length;h++){var v=p[h];(t=v.match(f))&&(e.classList.remove(t[0]),n.push(new d(r,0,t[1])))}else{var g=u.value;(t=g.match(f))&&(e.setAttribute(l,""),n.push(new d(r,2,t[1],l)))}}}),n}var o=e.arrays.from,i=e.dom.allChildNodes,a=e.objects.collectAnnotationsFromTypeMap,s=e.objects.ensure,c=e.dom.selectorMatches,u=e.dom.allTextNodes,f=/{{(.*?)}}/,l=/{{(.*?)}}/g;t.TEXT_CURLIES=/(.*?){{(.*?)}}/gim;var h=new Map,p={};t.selfClosingTags=/<(\w+)((\s+([^=\s\/<>]+|\w+=('[^']*'|"[^"]*"|[^"']\S*)))*)\s*\/>/gi,t.openTags="<$1$2></$1>";var v=function(){return function(e,t,n,r,o){var i=this;this.node=e,this.type=t,this.attribute=n,this.property=r,this.transformFns=o,this.hasMethods=function(){return i.transformFns.length>0}}}();t.Hook=v;var d=function(){return function(e,t,n,r,o,i){this.nodePosition=e,this.type=t,this.curly=n,this.attribute=r,this.property=o,this.transformFns=i}}();t.HookInfo=d;var g=function(){function e(e,t,n,r){this.node=e,this.hookInfos=t,this.hookMap=n,this.preComponents=r;for(var o=0,i=t.length;o<i;o++){var a=t[o],s=this.hookMap[a.curly.toLowerCase()].split(/:/);a.property=s.shift(),a.transformFns=s}}return e.prototype.asParsedTemplate=function(){for(var e=this.node.cloneNode(!0),t=i(e),n=this.hookInfos.map(function(e){return new v(t[e.nodePosition],e.type,e.attribute,e.property,e.transformFns)}),r=this.preComponents,o=r.length,a=[],s=0;s<o;s++){for(var c=r[s],u=c.nodes.length,f=[],l=0;l<u;l++)f[l]=t[c.nodes[l]];a[s]={info:c.info,nodes:f}}return{doc:e,first:t[1],hooks:n,components:a}},e}();t.PreparsedTemplate=g;var y=function(e){return u(e).forEach(function(e){var t=e.textContent.split(/({{.*?}})/gm);if(t.length>1){var n=e.parentNode,r=document.createDocumentFragment();t.forEach(function(e){""!==e&&r.appendChild(document.createTextNode(e))}),n.replaceChild(r,e)}}),e},m=document.createRange();t.getFragment=function(e){return m.createContextualFragment(e)},t.getPreparsedTemplate=n;var b=function(){function e(){}return e.getTemplate=function(e,t){var r=a(h,e)[t].call(e),o=p[r];return o||(o=n(r),p[r]=o),o.asParsedTemplate()},e.warmUp=function(){h.forEach(function(e,t){return Object.keys(e).forEach(function(r){var o=e[r];try{var i=o.call({});p[i]=n(i)}catch(e){console.warn("Template method "+o+" in "+t.constructor.name+" is not a pure function.",e)}})})},e}();t.TemplateFactory=b,t.Template=function(e){return void 0===e&&(e="default"),function(t,n){s(h,t,(r={},r[e]=t[n],r));var r}}}(e.annotations||(e.annotations={}))}(feather||(feather={}));var feather;!function(e){!function(t){function n(e,n,r){var i=e.element;t.addListener(i,n,function(t){var n=t.target;do{for(var a=0,s=r;a<s.length;a++){var c=s[a];n.nodeType===Node.ELEMENT_NODE&&(!c.selector&&n===i||o(n,c.selector))&&(c.preventDefault&&t.preventDefault(),c.bubble||t.stopImmediatePropagation(),e[c.method].call(e,t,n))}if(n===i)break}while(n=n.parentElement)})}var r,o=e.dom.selectorMatches,i=e.objects.collectAnnotationsFromArray,a=e.media.MediaQueryAware,s=e.objects.ensure,c=e.objects.merge,u=e.functions.isUndef;!function(e){e[e.Direct=0]="Direct",e[e.Delegate=1]="Delegate"}(r=t.Scope||(t.Scope={}));var f=(p={},p[r.Direct]=new WeakMap,p[r.Delegate]=new WeakMap,p),l=new WeakMap;t.addListener=function(e,t,n){e.addEventListener(t,n),s(l,e,[{event:t,fn:n}])};var h=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.handlers=function(e){return i(f[e],t).reduce(function(e,t){return c(e,(n={},n[t.event]=[t],n));var n},{})},t}return __extends(o,e),o.prototype.attachEvents=function(){this.attachDelegates(this.handlers(r.Delegate)),this.attachDirect(this.handlers(r.Direct))},o.prototype.attachDirect=function(e){var n=this,o=this.element;Object.keys(e).forEach(function(i){for(var a=e[i],s=0,c=a;s<c.length;s++)!function(e){var r=e.selector?o.querySelector(e.selector):o;r?t.addListener(r,i,function(t){return e.preventDefault&&t.preventDefault(),e.bubble||t.stopImmediatePropagation(),n[e.method].call(n,t,r)}):console.warn(e.selector+" didn't match anything inside the template")}(c[s]);n.eventRegistered(n,i,a,r.Direct)})},o.prototype.attachDelegates=function(e){var t=this;Object.keys(e).forEach(function(o){var i=e[o];n(t,o,i),t.eventRegistered(t,o,i,r.Delegate)})},o.prototype.eventRegistered=function(e,t,n,r){},o.prototype.cleanUp=function(){e.prototype.cleanUp.call(this);var t=l.get(this.element);if(t){for(var n=0,r=t;n<r.length;n++){var o=r[n];this.element.removeEventListener(o.event,o.fn)}l.delete(this.element)}},o}(a);t.EventAware=h,t.On=function(e){return function(t,n){var o=u(e.scope)?r.Delegate:e.scope,i=s(f[o],t,[]);e.event.split(/\s+/).forEach(function(t){return i.push({event:t,method:n,preventDefault:e.preventDefault,bubble:e.bubble,scope:o,selector:e.selector})})}};var p}(e.event||(e.event={}))}(feather||(feather={}));var feather;!function(e){!function(t){var n=e.event.EventAware,r=e.objects.ensure,o=e.objects.collectAnnotationsFromTypeMap,i=e.boot.WidgetFactory;t.subscribers=new WeakMap;var a=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.childWidgets=[],t}return __extends(n,e),n.prototype.triggerUp=function(e,t){this.trigger(e,t),this.parentWidget&&this.parentWidget.triggerUp(e,t)},n.prototype.triggerSingleton=function(e,t){i.singletonRegistry.forEach(function(n){return n.trigger(e,t)})},n.prototype.triggerDown=function(e,t){if(this.trigger(e,t),this.childWidgets)for(var n=0,r=this.childWidgets;n<r.length;n++)r[n].triggerDown(e,t)},n.prototype.trigger=function(e,n){var r=o(t.subscribers,this)[e];if(r)for(var i=0,a=r;i<a.length;i++){var s=a[i];Object.getPrototypeOf(this)[s].call(this,n)}},n}(n);t.Subscribable=a,t.Subscribe=function(e,n){return function(o,i,a){if(!0===n){var s=a.value,c=[];a.value=function(e){var t=this;c.push(e),requestAnimationFrame(function(){s.call(t,c),c.splice(0,c.length)})}}r(t.subscribers,o,(u={},u[e]=[i],u));var u}}}(e.hub||(e.hub={}))}(feather||(feather={}));var feather;!function(e){!function(t){var n=e.hub.Subscribable,r=e.strings.namedRegexMatch,o=e.objects.collectAnnotationsFromArray,i=e.objects.ensure,a=e.arrays.removeFromArray,s=new WeakMap,c=[],u=/[:*]\w+/gi,f=window.history&&window.history.pushState&&null===document.querySelector('[routing="hash"]'),l=[[/:\w+/gi,"([\\w\\d-]+)"],[/\*\w+/gi,"(.+)"]];t.namedMatch=function(e,t){var n=e.match(u);if(n&&n.length){n=n.map(function(e){return e.substr(1)});var o=l.reduce(function(e,t){return e.replace(t[0],t[1])},e),i=new RegExp("^"+o+"$","gi");return r(t,i,n)}if(new RegExp("^"+e+"$","gi").exec(t))return{}};var h=function(){var e=location.pathname;return f||("/"!==e?location.replace("/#"+e):e=location.hash?location.hash.replace(/^#/,""):"/"),e},p=function(e){for(var n=0,r=c;n<r.length;n++)for(var i=r[n],a=0,u=o(s,i);a<u.length;a++){var f=u[a],l=t.namedMatch(f.route,e);l&&i[f.handler].call(i,l)}};window.addEventListener(f?"popstate":"hashchange",function(){return p(h())},!1);var v=function(e){f?(history.pushState(null,"",e),p(h())):location.hash=e},d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentRoute=h,t.route=function(e){return v(e)},t}return __extends(t,e),t.prototype.initRoutes=function(){!~c.indexOf(this)&&s.has(Object.getPrototypeOf(this))&&c.push(this)},t.prototype.cleanUp=function(){e.prototype.cleanUp.call(this),a(c,[this])},t}(n);t.RouteAware=d,t.runRoutes=function(){window.blockRouting||p(h())},t.Route=function(e){return function(t,n){i(s,t,[{route:e,handler:n}])}}}(e.routing||(e.routing={}))}(feather||(feather={}));var feather;!function(e){!function(t){function n(e,t,n,r){var o=e[n];if(Array.isArray(o))l(o,{sort:function(){return r(o)},splice:function(){return r(o)}});else{var i=F.get(e),a=i&&i[n],s=E(F,e,(v={},v[n]=[r],v));if(a||Object.defineProperty(e,n,{get:function(){return o},set:function(r){if(r!==o){S(e,n,t,r,!1);var i=o;o=r;for(var a=0,c=s[n];a<c.length;a++)(0,c[a])(r,i)}return r}}),t.affectsArrays.length){var c,u=t.affectsArrays.length,f=e,h=void 0;do{for(h=0;h<u;h++)c=f[t.affectsArrays[h]],y(c)&&E(F,e,(d={},d[n]=[function(){return p(c)}],d))}while(y(f=f.parentWidget))}}var v,d}function r(e,t,n,r,o){if(2!==t.type&&1!==t.type)throw Error('Bool value can only be bound to attributes ie. hidden="{{myBool}}. Consider using filters to convert them to strings (true|false|yes|no etc)"');var i=t.node,a=t.attribute||t.property,s=function(e){return"boolean"==typeof i[a]?i[a]=!!n(e):D(i,a,!!n(e),""),s};o(this,r,t.property,s(e))}function o(e,t,n,r,o){var i=t.node;if(3===t.type){var a,s=[i],c=function(e){var t=n(e);if(a!==t){if(r.html){var o=k(t),u=s.slice(),f=u[0].parentNode;s=h(o.childNodes),f.replaceChild(o,u.shift()),u.forEach(function(e){return e.parentNode.removeChild(e)})}else i.textContent=n(e);a=t}return c};o(this,r,t.property,c(e))}else if(0===t.type){var u=function(e,t){if(y(e)){var r=n(e);r&&t(r)}},f=function(e,t){return u(t,function(e){return i.classList.remove(e)}),u(e,function(e){return i.classList.add(e)}),f};o(this,r,t.property,f(e))}else if(2===t.type||1===t.type){var l,p=t.attribute||t.property,v=function(e){var t=n(e);return t!==l&&(D(i,p,y(t),t),l=t),v};o(this,r,t.property,v(e))}}function i(e,t,n,r,o){var i=n.node,a=i.firstElementChild,s=[];return{sort:function(e){for(var n=[],r=0;r<e.length;r++)s[e[r]]&&i.appendChild(t[r].element),n[r]=s[e[r]];s=n},splice:function(n,c,u,f){void 0===f&&(f=[]);var l=h(s),p=e.childWidgets,d=o();if(s.splice.apply(s,[n,c].concat(u.map(function(e){return!1}))),c&&(f.forEach(function(e){return i.removeChild(e.element)}),v(p,f),L(f)),u.length){p.push.apply(p,u);for(var g=0,y=u;g<y.length;g++){var m=y[g];if(m.parentWidget=e,!m.element){var b=m.getParsed(r.templateName);m.bindToElement(b.first)}}}l.splice.apply(l,[n,c].concat(u.map(function(e){return!0})));for(var w=0,E=t.length;w<E;w++)if(l[w]=d(t[w]),l[w]&&!s[w]){var T=s.indexOf(!0,w),j=~T?t[T].element:a;i.insertBefore(t[w].element,j)}else!l[w]&&s[w]&&i.removeChild(t[w].element);s=l}}}function a(e,t,n,r){var o=e.splice(0,e.length);l(e,i(this,e,t,n,r)),e.push.apply(e,o)}function s(e,t,n){var i=this,a=function(e){return function(e,t,n,r){return a}},s=e.split(".").shift(),c=w(this,e),u=(typeof n(c)).toLowerCase(),f=T(M,this)[s],l=function(e){return"boolean"===u?r.call(i,e,t,n,f,a):/string|number|undefined/.test(u)?o.call(i,e,t,n,f,a):console.log("Deeply bound properties work only with strings, numbers or booleans. For arrays you can use a transformer: {{var:myTransformer}}?"),l};j(this,e,l(c))}function c(e,t,i,s){var c=Array.isArray(e)?"array":(typeof e).toLowerCase(),u=this[t.property];"boolean"===c?r.call(this,u,t,s,i,n):/string|number|undefined/.test(c)?o.call(this,u,t,s,i,n):"array"===c||d(e)?(d(e)||(s=_),a.call(this,u,t,i,s)):console.log("Bindings are only supported on arrays, booleans, strings and numbers")}function u(e,t,n,r){if(r=r.split(".").shift(),e){var o=T(M,e)[r];o&&o.bequeath?e.attachHooks.call(e,[n],t):u(e.parentWidget,t,n,r)}else console.log("@Bind() "+r+" annotation missing or 'bequeath' not set?",n,r,M)}var f=e.routing.RouteAware,l=e.arrays.observeArray,h=e.arrays.from,p=e.arrays.notifyListeners,v=e.arrays.removeFromArray,d=e.functions.isFunction,g=e.functions.compose,y=e.functions.isDef,m=e.functions.isUndef,b=e.objects.isObject,w=e.objects.deepValue,E=e.objects.ensure,T=e.objects.collectAnnotationsFromTypeMap,j=e.objects.createObjectPropertyListener,A=e.objects.values,O=e.boot.WidgetFactory,k=e.annotations.getFragment,F=new WeakMap,M=new WeakMap,W=new WeakMap,C=new WeakMap,D=function(e,t,n,r){"value"===t?e.value=n?r:"":n?e.setAttribute(t,r):e.removeAttribute(t)},x=function(e){var t=e.id||e.name||e.title||e.constructor.name;return d(t)?t():t},R=function(e,t){var n=[t],r=e;do{n.unshift(x(r))}while(r=r.parentWidget);return n.join(".")},L=function(e){setTimeout(function(){for(var t=0,n=e;t<n.length;t++)n[t].cleanUp()},50)},N=function(e,t,n){return localStorage.setItem(R(e,t),JSON.stringify({value:n}))},S=function(e,t,n,r,o){n&&n.localStorage&&(o?(C.has(r)&&clearTimeout(C.get(r)),C.set(r,setTimeout(function(){var n=T(W,e)[t];r=r.map(e[n.write]),N(e,t,r)},80))):N(e,t,r))},_=function(e){return function(){return!0}},P=function(e){var t=T(M,e);t&&Object.keys(t).forEach(function(n){if(t[n].localStorage)try{var r=localStorage.getItem(R(e,n));if(r){var o=JSON.parse(r).value;if(Array.isArray(o)){var i=T(W,e)[n];e[n]=o.map(e[i.read])}else e[n]=o}}catch(e){console.warn(e)}})},U=function(e,t){for(var n=O.singletonRegistry,r=0;r<n.length;r++){var o=n[r][t];if(o)return o.bind(e)}throw Error("Couldn't resolve transformer function "+t)},q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.attachHooks=function(e,t){var r,o,i=this,a=t||this,f=T(M,this);if(f){var h=A(f);r=h.filter(function(e){return 0!==e.affectsArrays.length}),o=h.filter(function(e){return e.localStorage&&Array.isArray(i[e.property])})}m(t)&&P(this);for(var p=0,v=e;p<v.length;p++){var y=v[p],E=y.property,j=f[E],O=g(y.transformFns.map(function(e){var t=a[e];return t?t.bind(i):U(i,e)})),k=this[E],F=b(k);~E.indexOf(".")||F&&y.hasMethods()?(k=w(this,E),m(k)?u(this.parentWidget,this,y,E):s.call(this,E,y,O)):!F||y.hasMethods()?d(k)?console.log("Binding to functions is not supported. Use new filters."):m(j)?u(this.parentWidget,this,y,E):c.call(this,O(k),y,j,O):console.log("Binding to objects is not supported. Use new widgets or specify inner property: x.y.z")}if(r)for(var W=0,C=r;W<C.length;W++){var D=C[W];n(this,D,D.property,function(){return 0})}if(o)for(var x=this,R=0,L=o;R<L.length;R++)!function(e){var t=x[e.property],n=function(){return S(i,e.property,e,t,!0)};l(t,{sort:n,splice:n})}(L[R])},t.prototype.cleanUp=function(){e.prototype.cleanUp.call(this),F.delete(this)},t}(f);t.Observable=q,t.Bind=function(e){return function(t,n){var r={templateName:"default",localStorage:!1,affectsArrays:[],property:n,html:!1},o=__assign({},r,e||{});E(M,t,(i={},i[n]=o,i));var i}},t.Write=function(e){return function(t,n){E(W,t,(r={},r[e]={write:n},r));var r}},t.Read=function(e){return function(t,n){E(W,t,(r={},r[e]={read:n},r));var r}}}(e.observe||(e.observe={}))}(feather||(feather={}));var feather;!function(e){!function(t){var n=e.boot.WidgetFactory;t.Construct=function(e){return function(t){return n.register(e,t)}}}(e.annotations||(e.annotations={}))}(feather||(feather={}));var feather;!function(e){!function(t){var n=e.strings.format,r=e.objects.deepValue,o=e.objects.merge,i=e.functions.strFactory;t.Method={GET:"GET",POST:"POST",DELETE:"DELETE",PUT:"PUT"},t.defaultRestConfig={url:null,method:t.Method.GET,timeout:5e3,async:!0,withCredentials:!0,responseFilter:function(e){return e?JSON.parse(e):null},requestFilter:function(e){return e?JSON.stringify(e):null},headers:{Accept:"application/json","Content-Type":"application/json;charset=utf-8"}},t.sendRequest=function(e,n,r){var i=new XMLHttpRequest;if(e=o(__assign({},t.defaultRestConfig),e),i.open(e.method,e.url,e.async),i.timeout=e.timeout,i.setRequestHeader)for(var a=0,s=Object.keys(e.headers);a<s.length;a++){var c=s[a];i.setRequestHeader(c,e.headers[c])}i.addEventListener("readystatechange",function(){if(4===i.readyState){var t=~~(i.status/100);2===t||3===t?n(e.responseFilter(i.responseText)):r(e.responseFilter(i.responseText),i)}});for(var u=0,f=["timeout","error","abort"];u<f.length;u++){var l=f[u];i.addEventListener(l,function(e){r(e)})}return e.progress&&i.addEventListener("progress",e.progress,!1),i.send(e.requestFilter(e.body)),i},t.Rest=function(e){return function(o,a,s){var c=s.value;s.value=function(){var o=this,a=__assign({},e,{progress:function(e){return o.triggerDown("xhr-progress",e)},body:e.body&&r(this,e.body),headers:e.headers&&Object.keys(e.headers).reduce(function(t,n){return __assign({},t,(r={},r[n]=i(e.headers[n]),r));var r},{})||{},url:n(e.url,this)});return t.sendRequest(a,s.value.original.bind(this),function(e,t){if(t&&t.status)o.triggerDown("xhr-failure-"+t.status,e,t);else if(e){var n=e.type;o.triggerDown("xhr-failure-"+n)}})},s.value.original=c}}}(e.xhr||(e.xhr={}))}(feather||(feather={}));var feather;!function(e){!function(t){var n=e.annotations.TemplateFactory,r=e.observe.Observable,o=e.boot.WidgetFactory,i=e.arrays.removeFromArray,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.bindToElement=function(e){this.element=e,this.init(e),this.attachEvents(),this.initRoutes(),this.attachMediaListeners()},t.prototype.render=function(e,t){void 0===e&&(e="default"),void 0===t&&(t=!1);var n=this.getParsed(e);t&&(this.element.innerHTML=""),this.element.appendChild(n.doc)},t.prototype.getParsed=function(e){for(var t=n.getTemplate(this,e),r=t.components,i=0,a=r.length;i<a;i++){var s=r[i];o.initComponents(s.nodes,s.info,this)}return this.attachHooks(t.hooks),t},t.prototype.init=function(e){},t.prototype.cleanUp=function(){var t=this;setTimeout(function(){e.prototype.cleanUp.call(t);for(var n=0,r=t.childWidgets;n<r.length;n++)r[n].cleanUp();i(o.singletonRegistry,[t])},10)},t}(r);t.Widget=a}(e.core||(e.core={}))}(feather||(feather={}));