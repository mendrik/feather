window.console||(window.console={}),console.log||(console.log=function(){});var __extends=function(e,t){function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},__assign=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++){t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},__rest=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(o[n[r]]=e[n[r]]);return o},__decorate=function(e,t,o,n){var r,c=arguments.length,l=c<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,o,n);else for(var f=e.length-1;f>=0;f--)(r=e[f])&&(l=(c<3?r(l):c>3?r(t,o,l):r(t,o))||l);return c>3&&l&&Object.defineProperty(t,o,l),l};
var feather;!function(e){!function(e){function t(e){return e&&"[object Function]"===n.call(e)}var n={}.toString;e.compose=function(e){return function(t){return 1===e.length?e[0](t):e.reduce(function(e,t){return t(e)},t)}},e.isFunction=t,e.isDef=function(e){return void 0!==e},e.isUndef=function(t){return!e.isDef(t)},e.strFactory=function(e){return t(e)?e():e}}(e.functions||(e.functions={}))}(feather||(feather={}));var feather;!function(e){!function(e){function t(e){return[].slice.call(e)}function n(e,t){for(var n=0,r=t.length,o=e.length;o--;)if(~t.indexOf(e[o]))n++;else if(n){if(e.splice(o+1,n),0==(r-=n)){n=0;break}n=0}n&&e.splice(0,n)}function r(e,t){var n=t[e];t[e]=function(){i.set(t,!0);var e=n.apply(t,arguments);return i.set(t,!1),c(t,"splice",s),e}}function o(t,n){var r=n[t];"splice"===t?n.splice=function(e,o){var a=[].slice.call(arguments,2),i=r.apply(n,arguments);return c(n,t,[e,o,a,i]),i}:"sort"===t&&(n.sort=function(o){var a=e.range(0,n.length-1),i=o?[n.map(function(e,t){return t}).sort(function(e,t){return o(n[e],n[t])}).map(function(e){return a[e]})]:a,s=r.call(n,o);return c(n,t,i),s})}var a=new WeakMap,i=new WeakMap,s=[0,0,[],[]];e.from=t,e.removeFromArray=n;var c=function(e,t,n){if(!0!==i.get(e))for(var r=0,o=a.get(e);r<o.length;r++)o[r][t].apply(e,n)};e.notifyListeners=function(e){return c(e,"splice",s)},e.range=function(e,t){for(var n=t-e+1,r=new Array(n),o=0,a=r.length;o<a;o++)r[o]=o+e;return r},e.observeArray=function(e,t){var n=a.get(e);n?n.push(t):(a.set(e,[t]),e.pop=function(){return e.splice(e.length-1,1)[0]},e.push=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.splice.apply(e,[e.length,0].concat(t)),e.length},e.fill=function(){throw Error("observed arrays cannot be filled. items must be unique, use Array.splice instead!")},e.reverse=function(){var t=e.slice();return e.sort(function(e,n){return t.indexOf(n)-t.indexOf(e)}),e},e.shift=function(){return e.splice(0,1)[0]},e.unshift=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.splice.apply(e,[0,0].concat(t)),e.length},o("splice",e),o("sort",e),r("forEach",e))};var u=function(e){setTimeout(function(){for(var t=0,n=e;t<n.length;t++)n[t].cleanUp()},50)};e.defaultArrayListener=function(e,r,o,a,i){var s=o.node,c=s.firstElementChild,f=[];return{sort:function(e){for(var t=[],n=0;n<e.length;n++)f[e[n]]&&s.appendChild(r[n].element),t[n]=f[e[n]];f=t},splice:function(o,l,h,p){void 0===p&&(p=[]);var d=t(f),v=e.childWidgets,g=i();if(f.splice.apply(f,[o,l].concat(h.map(function(e){return!1}))),l&&(p.forEach(function(e){return s.removeChild(e.element)}),n(v,p),u(p)),h.length){v.push.apply(v,h);for(var y=0,m=h;y<m.length;y++){var b=m[y];if(b.parentWidget=e,!b.element){var w=b.getParsed(a.templateName);b.bindToElement(w.first)}}}d.splice.apply(d,[o,l].concat(h.map(function(e){return!0})));for(var E=0,j=r.length;E<j;E++)if(d[E]=g(r[E]),d[E]&&!f[E]){var A=f.indexOf(!0,E),T=~A?r[A].element:c;s.insertBefore(r[E].element,T)}else!d[E]&&f[E]&&s.removeChild(r[E].element);f=d}}}}(e.arrays||(e.arrays={}))}(feather||(feather={}));var feather;!function(e){!function(t){function n(e,t){if(""===t)return e;var n,r,o;for(n=0,r=(o=t.split(".")).length;n<r;n++)if(e=e[o[n]],i(e))return;return e}function r(e,t){if(i(t))return[];var n=Object.getPrototypeOf(t),o=e.get(n)||[];return n&&o.push.apply(o,r(e,n)),o}function o(e,n){if(i(n))return{};var r=Object.getPrototypeOf(n),a=__assign({},e.get(r)||{});return r&&t.merge(a,o(e,r)),a}var a=e.arrays.observeArray,i=e.functions.isUndef;t.isObject=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)},t.values=function(e){return"values"in Object?Object.values(e):Array.apply(null,Object.keys(e).map(function(t){return e[t]}))},t.deepValue=n,t.setDeepValue=function(e,t,n){var r,o,a;for(r=0,o=(a=t.split(".")).length-1;r<o;r++)e=e[a[r]]||(e[a[r]]={});return e[a.pop()]=n},t.collectAnnotationsFromArray=r,t.merge=function(e,n){return void 0===e&&(e={}),Object.keys(n).forEach(function(r){var o=e[r],a=n[r];Array.isArray(o)?o.push.apply(o,a):t.isObject(o)?t.merge(o,a):e[r]=a}),e},t.collectAnnotationsFromTypeMap=o,t.pathCallbacks=new WeakMap;var s=function(e,t,n,r){var o=n.split(".").pop(),a=e[o];Object.defineProperty(e,o,{get:function(){return a},set:function(e){return a=e,u(a,t,n,r),r(n),a}}),u(a,t,n,r)},c=function(e,t){var n=e.indexOf(".["),r=~n?e.substring(0,n):e;return t.filter(function(e){return r.startsWith(e)||e.startsWith(r)})};t.createObjectPropertyListener=function(e,r,o){var a=r.split(".").shift(),i=t.pathCallbacks.get(e)&&t.pathCallbacks.get(e)[r],u=t.ensure(t.pathCallbacks,e,(f={},f[r]=[o],f));i||s(e,e,a,function(t){c(t,Object.keys(u)).forEach(function(t){u[t].forEach(function(r){r(n(e,t))})})});var f};var u=function(e,n,r,o){if(t.isObject(e)){var i=Object.keys(t.pathCallbacks.get(n));Object.keys(e).forEach(function(t){var a=r+"."+t;c(a,i).length>0&&s(e,n,a,o)})}else Array.isArray(e)&&(e.forEach(function(e,t){return u(e,n,r+".["+t+"]",o)}),a(e,{sort:function(){return o(r)},splice:function(e,t,a){o(r),a.forEach(function(e,t){return u(e,n,r+".["+t+"]",o)})}}))};t.ensure=function(e,n,r){var o=e.get(n);return o?Array.isArray(o)&&Array.isArray(r)?o.push.apply(o,r):t.isObject(o)&&t.merge(o,r):e.set(n,o=r),o}}(e.objects||(e.objects={}))}(feather||(feather={}));var feather;!function(e){!function(e){var t=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","matchesSelector"].reduce(function(e,t){return Element.prototype[t]||e});e.selectorMatches=function(e,n){return t.call(e,n)},e.allChildNodes=function(e){var t,n=document.createTreeWalker(e,NodeFilter.SHOW_ALL,null,!1),r=[];do{((t=n.currentNode).nodeType!==Node.TEXT_NODE||t.textContent.trim())&&r.push(t)}while(n.nextNode());return r},e.allTextNodes=function(e){for(var t,n=[],r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);t=r.nextNode();)n.push(t);return n}}(e.dom||(e.dom={}))}(feather||(feather={}));var feather;!function(e){!function(t){var n=e.objects.deepValue;t.format=function(e,t){return e.replace(/{{.*?}}/g,function(e){return n(t,e.substring(2,e.length-2))})},t.namedRegexMatch=function(e,t,n){var r=t.exec(e);if(r)return r.reduce(function(e,t,r){return r>0&&(e[n[r-1]]=t),e},{})}}(e.strings||(e.strings={}))}(feather||(feather={}));var feather;!function(e){!function(t){var n=e.functions.isFunction,r=e.objects.collectAnnotationsFromTypeMap,o=e.objects.ensure,a=new WeakMap,i=new WeakMap,s=function(e){var t=e.id||e.name||e.title||e.constructor.name;return n(t)?t():t},c=function(e,t){var n=[t],r=e;do{n.unshift(s(r))}while(r=r.parentWidget);return n.join(".")},u=function(e,t,n){return localStorage.setItem(c(e,t),JSON.stringify({value:n}))};t.maybeStore=function(e,t,n,o,s){n&&n.localStorage&&(s?(i.has(o)&&clearTimeout(i.get(o)),i.set(o,setTimeout(function(){var n=r(a,e)[t];o=o.map(e[n.write]),u(e,t,o)},80))):u(e,t,o))},t.loadLocalStorageValue=function(e,t){var n=r(e,t);n&&Object.keys(n).forEach(function(e){if(n[e].localStorage)try{var o=localStorage.getItem(c(t,e));if(o){var i=JSON.parse(o).value;if(Array.isArray(i)){var s=r(a,t)[e];t[e]=i.map(t[s.read])}else t[e]=i}}catch(e){console.warn(e)}})},t.Write=function(e){return function(t,n){o(a,t,(r={},r[e]={write:n},r));var r}},t.Read=function(e){return function(t,n){o(a,t,(r={},r[e]={read:n},r));var r}}}(e.observe||(e.observe={}))}(feather||(feather={}));var feather;!function(feather){var boot;!function(boot){var isDef=feather.functions.isDef,from=feather.arrays.from,ComponentInfo=function(){return function(e,t,n,r){this.selector=e,this.singleton=t,this.attributes=n,this.component=r}}();boot.ComponentInfo=ComponentInfo;var attributeParser=function(node,context){return function(key){var value=node.getAttribute(key),m=(value||"").match(/^{(.+?)}\/?$/i);if(m){var js=m[1];value=context[js]||function(str){return eval(str)}.bind(context)(js),isDef(value)&&node.removeAttribute(key)}return value}},WidgetFactory=function(){function e(){}return e.start=function(t,n){void 0===t&&(t=document),feather.annotations.TemplateFactory.warmUp();for(var r=e.widgetRegistry,o=0,a=r.length;o<a;o++){var i=r[o],s=from(t.querySelectorAll(i.selector));e.initComponents(s,r[o],n)}t===document&&feather.routing.runRoutes()},e.initComponents=function(t,n,r){for(var o=0,a=t.length;o<a;o++){var i=t[o],s=n.attributes.map(attributeParser(i,r||window)),c=new(Function.prototype.bind.apply(n.component,[null].concat(s)));n.singleton&&e.singletonRegistry.push(c),r&&(c.parentWidget=r,r.childWidgets.push(c)),c.bindToElement(i)}},e.register=function(e,t){this.widgetRegistry.push(new ComponentInfo(e.selector,e.singleton,e.attributes||[],t))},e.widgetRegistry=[],e.singletonRegistry=[],e}();boot.WidgetFactory=WidgetFactory}(boot=feather.boot||(feather.boot={}))}(feather||(feather={})),function(e){e.start=function(){return e.boot.WidgetFactory.start()}}(feather||(feather={}));var feather;!function(e){!function(t){var n=e.objects.collectAnnotationsFromArray,r=e.objects.ensure,o=new WeakMap,a=new WeakMap,i=function(){function e(){}return e.prototype.attachMediaListeners=function(){var e=this;n(o,this).forEach(function(t){var n=window.matchMedia(t.query),o=function(n){n.matches&&e[t.method].call(e,n)};n.addListener(o),r(a,e,[{mediaQuery:n,listener:o}]),o(n)})},e.prototype.cleanUp=function(){var e=a.get(this);if(e)for(var t=0,n=e;t<n.length;t++){var r=n[t];r.mediaQuery.removeListener(r.listener)}},e}();t.MediaQueryAware=i,t.Media=function(e){return function(t,n){r(o,t,[]).push({method:n,query:e})}}}(e.media||(e.media={}))}(feather||(feather={}));var feather;!function(e){!function(t){function n(n){for(var o,i=n.replace(t.selfClosingTags,t.openTags),s=y(t.getFragment(i)),u=a(s),f={};o=l.exec(n);)f[o[1].toLowerCase()]=o[1];for(var h=e.boot.WidgetFactory.widgetRegistry,p=[],d=0,v=h.length,m=u.length;d<v;d++){for(var b=[],w=h[d],E=0;E<m;E++){var j=u[E];j.nodeType===Node.ELEMENT_NODE&&c(j,h[d].selector)&&b.push(E)}b.length>0&&p.push({info:w,nodes:b})}return new g(s,r(u),f,p)}function r(e){var t,n=[];return e.forEach(function(e,r){if(e.nodeType===Node.TEXT_NODE){var a=e.textContent,i=f.exec(a);null!==i&&n.push(new v(r,3,i[1]))}else if(e.nodeType===Node.ELEMENT_NODE)for(var s=0,c=o(e.attributes);s<c.length;s++){var u=c[s],l=u.nodeName;if(t=l.match(f))e.removeAttribute(t[0]),n.push(new v(r,1,t[1]));else if("class"===l)for(var h=0,p=o(e.classList);h<p.length;h++){var d=p[h];(t=d.match(f))&&(e.classList.remove(t[0]),n.push(new v(r,0,t[1])))}else{var g=u.value;(t=g.match(f))&&(e.setAttribute(l,""),n.push(new v(r,2,t[1],l)))}}}),n}var o=e.arrays.from,a=e.dom.allChildNodes,i=e.objects.collectAnnotationsFromTypeMap,s=e.objects.ensure,c=e.dom.selectorMatches,u=e.dom.allTextNodes,f=/{{(.*?)}}/,l=/{{(.*?)}}/g;t.TEXT_CURLIES=/(.*?){{(.*?)}}/gim;var h=new Map,p={};t.selfClosingTags=/<(\w+)((\s+([^=\s\/<>]+|\w+=('[^']*'|"[^"]*"|[^"']\S*)))*)\s*\/>/gi,t.openTags="<$1$2></$1>";var d=function(){return function(e,t,n,r,o){var a=this;this.node=e,this.type=t,this.attribute=n,this.property=r,this.transformFns=o,this.hasMethods=function(){return a.transformFns.length>0}}}();t.Hook=d;var v=function(){return function(e,t,n,r,o,a){this.nodePosition=e,this.type=t,this.curly=n,this.attribute=r,this.property=o,this.transformFns=a}}();t.HookInfo=v;var g=function(){function e(e,t,n,r){this.node=e,this.hookInfos=t,this.hookMap=n,this.preComponents=r;for(var o=0,a=t.length;o<a;o++){var i=t[o],s=this.hookMap[i.curly.toLowerCase()].split(/:/);i.property=s.shift(),i.transformFns=s}}return e.prototype.asParsedTemplate=function(){for(var e=this.node.cloneNode(!0),t=a(e),n=this.hookInfos.map(function(e){return new d(t[e.nodePosition],e.type,e.attribute,e.property,e.transformFns)}),r=this.preComponents,o=r.length,i=[],s=0;s<o;s++){for(var c=r[s],u=c.nodes.length,f=[],l=0;l<u;l++)f[l]=t[c.nodes[l]];i[s]={info:c.info,nodes:f}}return{doc:e,first:t[1],hooks:n,components:i}},e}();t.PreparsedTemplate=g;var y=function(e){return u(e).forEach(function(e){var t=e.textContent.split(/({{.*?}})/gm);if(t.length>1){var n=e.parentNode,r=document.createDocumentFragment();t.forEach(function(e){""!==e&&r.appendChild(document.createTextNode(e))}),n.replaceChild(r,e)}}),e},m=document.createRange();t.getFragment=function(e){return m.createContextualFragment(e)},t.getPreparsedTemplate=n;var b=function(){function e(){}return e.getTemplate=function(e,t){var r=i(h,e)[t].call(e),o=p[r];return o||(o=n(r),p[r]=o),o.asParsedTemplate()},e.warmUp=function(){h.forEach(function(e,t){return Object.keys(e).forEach(function(r){var o=e[r];try{var a=o.call({});p[a]=n(a)}catch(e){console.warn("Template method "+o+" in "+t.constructor.name+" is not a pure function.",e)}})})},e}();t.TemplateFactory=b,t.Template=function(e){return void 0===e&&(e="default"),function(t,n){s(h,t,(r={},r[e]=t[n],r));var r}}}(e.annotations||(e.annotations={}))}(feather||(feather={}));var feather;!function(e){!function(t){function n(e,n,r){var a=e.element;t.addListener(a,n,function(t){var n=t.target;do{for(var i=0,s=r;i<s.length;i++){var c=s[i];n.nodeType===Node.ELEMENT_NODE&&(!c.selector&&n===a||o(n,c.selector))&&(c.preventDefault&&t.preventDefault(),c.bubble||t.stopImmediatePropagation(),e[c.method].call(e,t,n))}if(n===a)break}while(n=n.parentElement)})}var r,o=e.dom.selectorMatches,a=e.objects.collectAnnotationsFromArray,i=e.media.MediaQueryAware,s=e.objects.ensure,c=e.objects.merge,u=e.functions.isUndef;!function(e){e[e.Direct=0]="Direct",e[e.Delegate=1]="Delegate"}(r=t.Scope||(t.Scope={}));var f=(p={},p[r.Direct]=new WeakMap,p[r.Delegate]=new WeakMap,p),l=new WeakMap;t.addListener=function(e,t,n){e.addEventListener(t,n),s(l,e,[{event:t,fn:n}])};var h=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.handlers=function(e){return a(f[e],t).reduce(function(e,t){return c(e,(n={},n[t.event]=[t],n));var n},{})},t}return __extends(o,e),o.prototype.attachEvents=function(){this.attachDelegates(this.handlers(r.Delegate)),this.attachDirect(this.handlers(r.Direct))},o.prototype.attachDirect=function(e){var n=this,o=this.element;Object.keys(e).forEach(function(a){for(var i=e[a],s=0,c=i;s<c.length;s++)!function(e){var r=e.selector?o.querySelector(e.selector):o;r?t.addListener(r,a,function(t){return e.preventDefault&&t.preventDefault(),e.bubble||t.stopImmediatePropagation(),n[e.method].call(n,t,r)}):console.warn(e.selector+" didn't match anything inside the template")}(c[s]);n.eventRegistered(n,a,i,r.Direct)})},o.prototype.attachDelegates=function(e){var t=this;Object.keys(e).forEach(function(o){var a=e[o];n(t,o,a),t.eventRegistered(t,o,a,r.Delegate)})},o.prototype.eventRegistered=function(e,t,n,r){},o.prototype.cleanUp=function(){e.prototype.cleanUp.call(this);var t=l.get(this.element);if(t){for(var n=0,r=t;n<r.length;n++){var o=r[n];this.element.removeEventListener(o.event,o.fn)}l.delete(this.element)}},o}(i);t.EventAware=h,t.On=function(e){return function(t,n){var o=u(e.scope)?r.Delegate:e.scope,a=s(f[o],t,[]);e.event.split(/\s+/).forEach(function(t){return a.push({event:t,method:n,preventDefault:e.preventDefault,bubble:e.bubble,scope:o,selector:e.selector})})}};var p}(e.event||(e.event={}))}(feather||(feather={}));var feather;!function(e){!function(t){var n=e.event.EventAware,r=e.objects.ensure,o=e.objects.collectAnnotationsFromTypeMap,a=e.boot.WidgetFactory;t.subscribers=new WeakMap;var i=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.childWidgets=[],t}return __extends(n,e),n.prototype.triggerUp=function(e,t){this.trigger(e,t),this.parentWidget&&this.parentWidget.triggerUp(e,t)},n.prototype.triggerSingleton=function(e,t){a.singletonRegistry.forEach(function(n){return n.trigger(e,t)})},n.prototype.triggerDown=function(e,t){if(this.trigger(e,t),this.childWidgets)for(var n=0,r=this.childWidgets;n<r.length;n++)r[n].triggerDown(e,t)},n.prototype.trigger=function(e,n){var r=o(t.subscribers,this)[e];if(r)for(var a=0,i=r;a<i.length;a++){var s=i[a];Object.getPrototypeOf(this)[s].call(this,n)}},n}(n);t.Subscribable=i,t.Subscribe=function(e,n){return function(o,a,i){if(!0===n){var s=i.value,c=[];i.value=function(e){var t=this;c.push(e),requestAnimationFrame(function(){s.call(t,c),c.splice(0,c.length)})}}r(t.subscribers,o,(u={},u[e]=[a],u));var u}}}(e.hub||(e.hub={}))}(feather||(feather={}));var feather;!function(e){!function(t){var n=e.hub.Subscribable,r=e.strings.namedRegexMatch,o=e.objects.collectAnnotationsFromArray,a=e.objects.ensure,i=e.arrays.removeFromArray,s=new WeakMap,c=[],u=/[:*]\w+/gi,f=window.history&&window.history.pushState&&null===document.querySelector('[routing="hash"]'),l=[[/:\w+/gi,"([\\w\\d-]+)"],[/\*\w+/gi,"(.+)"]];t.namedMatch=function(e,t){var n=e.match(u);if(n&&n.length){n=n.map(function(e){return e.substr(1)});var o=l.reduce(function(e,t){return e.replace(t[0],t[1])},e),a=new RegExp("^"+o+"$","gi");return r(t,a,n)}if(new RegExp("^"+e+"$","gi").exec(t))return{}};var h=function(){var e=location.pathname;return f||("/"!==e?location.replace("/#"+e):e=location.hash?location.hash.replace(/^#/,""):"/"),e},p=function(e){for(var n=0,r=c;n<r.length;n++)for(var a=r[n],i=0,u=o(s,a);i<u.length;i++){var f=u[i],l=t.namedMatch(f.route,e);l&&a[f.handler].call(a,l)}};window.addEventListener(f?"popstate":"hashchange",function(){return p(h())},!1);var d=function(e){f?(history.pushState(null,"",e),p(h())):location.hash=e},v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentRoute=h,t.route=function(e){return d(e)},t}return __extends(t,e),t.prototype.initRoutes=function(){!~c.indexOf(this)&&s.has(Object.getPrototypeOf(this))&&c.push(this)},t.prototype.cleanUp=function(){e.prototype.cleanUp.call(this),i(c,[this])},t}(n);t.RouteAware=v,t.runRoutes=function(){window.blockRouting||p(h())},t.Route=function(e){return function(t,n){a(s,t,[{route:e,handler:n}])}}}(e.routing||(e.routing={}))}(feather||(feather={}));var feather;!function(e){!function(t){function n(e,n,r,o){var a=e[r];if(Array.isArray(a))l(a,{sort:function(){return o(a)},splice:function(){return o(a)}});else{var i=F.get(e),s=i&&i[r],c=w(F,e,(v={},v[r]=[o],v));if(s||Object.defineProperty(e,r,{get:function(){return a},set:function(o){if(o!==a){t.maybeStore(e,r,n,o,!1);var i=a;a=o;for(var s=0,u=c[r];s<u.length;s++)(0,u[s])(o,i)}return o}}),n.affectsArrays.length){var u,f=n.affectsArrays.length,h=e,d=void 0;do{for(d=0;d<f;d++)u=h[n.affectsArrays[d]],g(u)&&w(F,e,(y={},y[r]=[function(){return p(u)}],y))}while(g(h=h.parentWidget))}}var v,y}function r(e,t,n,r,o){if(2!==t.type&&1!==t.type)throw Error('Bool value can only be bound to attributes ie. hidden="{{myBool}}. Consider using filters to convert them to strings (true|false|yes|no etc)"');var a=t.node,i=t.attribute||t.property,s=function(e){return"boolean"==typeof a[i]?a[i]=!!n(e):C(a,i,!!n(e),""),s};o(this,r,t.property,s(e))}function o(e,t,n,r,o){var a=t.node;if(3===t.type){var i,s=[a],c=function(e){var t=n(e);if(i!==t){if(r.html){var o=O(t),u=s.slice(),f=u[0].parentNode;s=h(o.childNodes),f.replaceChild(o,u.shift()),u.forEach(function(e){return e.parentNode.removeChild(e)})}else a.textContent=n(e);i=t}return c};o(this,r,t.property,c(e))}else if(0===t.type){var u=function(e,t){if(g(e)){var r=n(e);r&&t(r)}},f=function(e,t){return u(t,function(e){return a.classList.remove(e)}),u(e,function(e){return a.classList.add(e)}),f};o(this,r,t.property,f(e))}else if(2===t.type||1===t.type){var l,p=t.attribute||t.property,d=function(e){var t=n(e);return t!==l&&(C(a,p,g(t),t),l=t),d};o(this,r,t.property,d(e))}}function a(e,t,n,r){if(1===t.type){var o=e.splice(0,e.length);l(e,k(this,e,t,n,r)),e.push.apply(e,o)}else console.log("Arrays can be bound only in a node: <div {{myarray}}></div>")}function i(e,t,n){var a=this,i=function(t,n,r,o){return j(a,e,o)},s=e.split(".").shift(),c=b(this,e),u=(typeof n(c)).toLowerCase(),f=E(M,this)[s];"boolean"===u?r.call(this,c,t,n,f,i):/string|number|undefined/.test(u)?o.call(this,c,t,n,f,i):console.log("Deeply bound properties work only with strings, numbers or booleans. For arrays you can use a transformer: {{var:myTransformer}}?")}function s(e,t){var n=t.node,r=function(e){return Object.keys(e).forEach(function(t){n.style[t]=e[t]}),r};j(this,e,r(this[e]))}function c(e,t,i,s,c){var u=Array.isArray(t)?"array":(typeof t).toLowerCase(),f=e[i.property];"boolean"===u?r.call(e,f,i,c,s,n):/string|number|undefined/.test(u)?o.call(e,f,i,c,s,n):"array"===u||d(t)?(d(t)||(c=W),a.call(e,f,i,s,c)):console.log("Bindings are only supported on arrays, booleans, strings and numbers")}function u(e,t,n,r){if(r=r.split(".").shift(),e){var o=E(M,e)[r];o&&o.bequeath?e.attachHooks.call(e,[n],t):u(e.parentWidget,t,n,r)}else console.log("@Bind() "+r+" annotation missing or 'bequeath' not set?",n,r,M)}var f=e.routing.RouteAware,l=e.arrays.observeArray,h=e.arrays.from,p=e.arrays.notifyListeners,d=e.functions.isFunction,v=e.functions.compose,g=e.functions.isDef,y=e.functions.isUndef,m=e.objects.isObject,b=e.objects.deepValue,w=e.objects.ensure,E=e.objects.collectAnnotationsFromTypeMap,j=e.objects.createObjectPropertyListener,A=e.objects.values,T=e.boot.WidgetFactory,O=e.annotations.getFragment,k=e.arrays.defaultArrayListener,F=new WeakMap,M=new WeakMap,W=function(e){return function(){return!0}},C=function(e,t,n,r){"value"===t?e.value=n?r:"":n?e.setAttribute(t,r):e.removeAttribute(t)},D=function(e,t){for(var n=T.singletonRegistry,r=0;r<n.length;r++){var o=n[r][t];if(o)return o.bind(e)}throw Error("Couldn't resolve transformer function "+t)},x=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return __extends(r,e),r.prototype.attachHooks=function(e,r){var o,a,f=this,h=r||this,p=E(M,this);if(p){var g=A(p);o=g.filter(function(e){return 0!==e.affectsArrays.length}),a=g.filter(function(e){return e.localStorage&&Array.isArray(f[e.property])})}y(r)&&t.loadLocalStorageValue(M,this);for(var w=0,j=e;w<j.length;w++){var T=j[w],O=T.property,k=v(T.transformFns.map(function(e){var t=h[e];return t?t.bind(f):D(f,e)})),F=this[O],W=m(F);if(d(F))console.log("Binding to functions is not supported. Use new filters.");else if(~O.indexOf(".")||W&&T.hasMethods())F=b(this,O),y(F)?u(this.parentWidget,this,T,O):i.call(this,O,T,k);else{if(W){if("style"===T.attribute){s.call(this,O,T);continue}if(!T.hasMethods()){console.log("Binding to objects is not supported. Use new widgets or specify inner property: x.y.z");continue}}var C=p[O];y(C)?u(this.parentWidget,this,T,O):c(this,k(F),T,C,k)}}if(o)for(var x=0,L=o;x<L.length;x++){var S=L[x];n(this,S,S.property,function(){return 0})}if(a)for(var R=this,N=0,_=a;N<_.length;N++)!function(e){var n=R[e.property],r=function(){return t.maybeStore(f,e.property,e,n,!0)};l(n,{sort:r,splice:r})}(_[N])},r.prototype.cleanUp=function(){e.prototype.cleanUp.call(this),F.delete(this)},r}(f);t.Observable=x,t.Bind=function(e){return function(t,n){var r={templateName:"default",localStorage:!1,affectsArrays:[],property:n,html:!1},o=__assign({},r,e||{});w(M,t,(a={},a[n]=o,a));var a}}}(e.observe||(e.observe={}))}(feather||(feather={}));var feather;!function(e){!function(t){var n=e.boot.WidgetFactory;t.Construct=function(e){return function(t){return n.register(e,t)}}}(e.annotations||(e.annotations={}))}(feather||(feather={}));var feather;!function(e){!function(t){var n=e.strings.format,r=e.objects.deepValue,o=e.objects.merge,a=e.functions.strFactory;t.Method={GET:"GET",POST:"POST",DELETE:"DELETE",PUT:"PUT"},t.defaultRestConfig={url:null,method:t.Method.GET,timeout:5e3,async:!0,withCredentials:!0,responseFilter:function(e){return e?JSON.parse(e):null},requestFilter:function(e){return e?JSON.stringify(e):null},headers:{Accept:"application/json","Content-Type":"application/json;charset=utf-8"}},t.sendRequest=function(e,n,r){var a=new XMLHttpRequest;if(e=o(__assign({},t.defaultRestConfig),e),a.open(e.method,e.url,e.async),a.timeout=e.timeout,a.setRequestHeader)for(var i=0,s=Object.keys(e.headers);i<s.length;i++){var c=s[i];a.setRequestHeader(c,e.headers[c])}a.addEventListener("readystatechange",function(){if(4===a.readyState){var t=~~(a.status/100);2===t||3===t?n(e.responseFilter(a.responseText)):r(e.responseFilter(a.responseText),a)}});for(var u=0,f=["timeout","error","abort"];u<f.length;u++){var l=f[u];a.addEventListener(l,function(e){r(e)})}return e.progress&&a.addEventListener("progress",e.progress,!1),a.send(e.requestFilter(e.body)),a},t.Rest=function(e){return function(o,i,s){var c=s.value;s.value=function(){var o=this,i=__assign({},e,{progress:function(e){return o.triggerDown("xhr-progress",e)},body:e.body&&r(this,e.body),headers:e.headers&&Object.keys(e.headers).reduce(function(t,n){return __assign({},t,(r={},r[n]=a(e.headers[n]),r));var r},{})||{},url:n(e.url,this)});return t.sendRequest(i,s.value.original.bind(this),function(e,t){if(t&&t.status)o.triggerDown("xhr-failure-"+t.status,e,t);else if(e){var n=e.type;o.triggerDown("xhr-failure-"+n)}})},s.value.original=c}}}(e.xhr||(e.xhr={}))}(feather||(feather={}));var feather;!function(e){!function(t){var n,r=e.annotations.TemplateFactory,o=e.observe.Observable,a=e.boot.WidgetFactory,i=e.arrays.removeFromArray;!function(e){e[e.append=0]="append",e[e.prepend=1]="prepend",e[e.replace=2]="replace"}(n=t.RenderPlacement||(t.RenderPlacement={}));var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.bindToElement=function(e){this.element=e,this.init(e),this.attachEvents(),this.initRoutes(),this.attachMediaListeners()},t.prototype.render=function(e,t){void 0===e&&(e="default"),void 0===t&&(t=n.append);var r=this.getParsed(e);t===n.replace&&(this.element.innerHTML=""),t===n.prepend?this.element.insertBefore(r.doc,this.element.firstChild):this.element.appendChild(r.doc)},t.prototype.getParsed=function(e){for(var t=r.getTemplate(this,e),n=t.components,o=0,i=n.length;o<i;o++){var s=n[o];a.initComponents(s.nodes,s.info,this)}return this.attachHooks(t.hooks),t},t.prototype.init=function(e){},t.prototype.cleanUp=function(){var t=this;setTimeout(function(){e.prototype.cleanUp.call(t);for(var n=0,r=t.childWidgets;n<r.length;n++)r[n].cleanUp();i(a.singletonRegistry,[t])},10)},t}(o);t.Widget=s}(e.core||(e.core={}))}(feather||(feather={}));